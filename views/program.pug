extends includes/layout

block content
    style.
        .card {
            margin-left: 5pt;
            margin-bottom: 5pt;
            max-width: 200pt;
            float: left;
        }
    include includes/header-sm
    h1 Program

    div(class="panel panel-primary")
        div(class='panel-heading') Detaily
        div(class='panel-body')
            div(class='form-group')
                label(for='progName') Názov
                input(id='progName' class='form-control' value=program.name readonly)
            div(class='form-group')
                label  Začiatok Programu
                a(id='startDate' data-name='startDate' data-type='combodate' data-viewformat=fmt.fmtDateFormat(user.locales).toUpperCase() data-pk=program._id data-url='/program/' + program._id + '/fields' class='editable form-control' href='#')
                    = fmt.fmtDate(program.startDate, user.locales)
            div(class='form-group')
                label Koniec Programu
                a(id='endDate' data-name='endDate' data-type='combodate' data-viewformat=fmt.fmtDateFormat(user.locales).toUpperCase() data-pk=program._id data-url='/program/' + program._id + '/fields' class='editable form-control' href='#')
                    = fmt.fmtDate(program.endDate, user.locales)


        if user && (user.isAdmin || user.isProgramManager)
            div(class='panel-footer')
                button(id='exportData' type="button" class="btn btn-default") Export dát
                button(id='addManager' type="button" class="btn btn-default") Pridať manažéra

    div(class="panel panel-primary")
        div(class='panel-heading') Manažéri programu
        div(class='panel-body')
            div(id='pmsList' class='container-fluid')

    div(class="panel panel-primary")
        div(class='panel-heading') Stretnutia/Turnaje
        div(class='panel-body')
            div(id='eventList' class='container-fluid')

    div(class="panel panel-primary")
        div(class='panel-heading') Zapojené tímy
        div(class='panel-body')
            div(id='teamList' class='container-fluid' style="max-height: 400pt; overflow: auto;")

    div(id='modalDlgs')

    script.
        var u = '{ "locales": "#{user?user.locales:"en-US"}" ,'
            + '"username": "#{user?user.username:"not-logged-in"}", '
            + '"permissions": { '
            + '   "isAdmin": #{user?(user.isAdmin ? true : false):false}, '
            + '   "isProgramManager": #{user?(user.isProgramManager ? true : false):false} '
            + '}}';
        viewProgram.init("#{program._id}",u);