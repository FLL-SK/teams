extends includes/layout

block content
    style.
        .card {
            margin-left: 5pt;
            margin-bottom: 5pt;
            max-width: 200pt;
            float: left;
        }
        .coach {
            padding: 3pt;
        }

    include includes/header-sm
    h1 Profil tímu

    div(class="panel panel-primary")
        div(class='panel-heading') Detaily
        div(class='panel-body')
            if team.recordStatus !== 'active'
                div(class="alert alert-warning")
                    strong Pozor!
                    =" Tento záznam už nie je aktívny a je udržiavaný iba pre archívne účely."
            div(class='form-group')
                a(id='teamName' data-name='name' data-title='Názov' data-type='text' data-pk=team._id data-url='/team/'+team._id+'/fields' class='form-control' href='#')
                    = team.name
            div(class='form-group')
                label(for='progName') Program/Súťaž
                input(id='progName' class='form-control' value=team.programName readonly)
            div(class='form-group' id="eventReg")
                if team.events && team.events.length > 0
                    label(class="label-control") Stretnutia/turnaje
                    for e in team.events
                        =" "
                        a(href="/event/"+e._id) #{e.name}
                        span(id="pInvoice")
                        span(id="iInvoice")
                else
                    if user && (user.isAdmin || user.isCoach) && team.recordStatus == 'active'
                        button(class="btn btn-success" data-toggle="modal" data-target="#registerEvent") Registruj na turnaj
            div(class='form-group')
                ul(class='list-group' id="invoices")
        div(class='panel-footer')
            div(class='form-group')
                if user && (user.isAdmin || user.isCoach) && team.recordStatus == 'active'
                    div(class='btn-group')
                        button(id="btnFounderDetails" class="btn btn-default") Zriaďovateľ
                        button(id="btnBillingDetails" class="btn btn-default") Fakturačné údaje
                        button(id="btnShippingDetails" class="btn btn-default") Korešpondenčné údaje
                    div(class='btn-group pull-right')
                        button(id="btnRemoveTeam" class="btn btn-default") Zruš tím

    div(id='registerEvent' class='modal fade' role='dialog')
        div(class='modal-dialog')
            div(class='modal-content')
                div(class='modal-header')
                    button(type='button', class='close' data-dismiss='modal') &times;
                    h4 Registrácia
                div(class='modal-body')
                    div(class='form-group')
                        label Dostupné súťaže
                        select(id='availEvents' class="form-control")
                            option -none-
                div(class='modal-footer')
                    div(class='row')
                        div(class='col-sm-12')
                            span(id="registerStatus" class="text-warning")
                    button(id='btnRegister' type='button' class='btn btn-default') Potvrdiť registráciu

    div(class="panel panel-primary")
        div(class='panel-heading') Tréneri
            =" "
            span(id="coachCount")
        div(id='coachList' class='panel-body container-fluid')
            div(class='panel col-sm-6')
                p Žiadny
        if user && (user.isAdmin || user.isCoach) && team.recordStatus == 'active'
            div(class='panel-footer')
                button(id='btnAddCoach' type="button" class="btn btn-default")
                    span(class="glyphicon glyphicon-user") +
                    | Pridať trénera

    div(class="panel panel-primary")
        div(class='panel-heading') Členovia tímu
            =" "
            span(id="memberCount")
        div(class='panel-body')
            div(id='memberList' class='container-fluid')
                div(class='panel')
                    p Žiadny
        if user && (user.isAdmin || user.isCoach) && team.recordStatus == 'active'
            div(class='panel-footer')
                button(id='createMember' type="button" class="btn btn-default")
                    span(class="glyphicon glyphicon-user") +
                    | Pridať člena


    div(id="modalDlgs")

    script.
        viewTeam.init("#{user.locales}");